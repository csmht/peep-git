# GitSee - Git æ´»åŠ¨ç›‘è§†å·¥å…·

ä¸€ä¸ªç”¨äºç›‘è§†æœ¬åœ° Git æäº¤å’Œæ¨é€æ´»åŠ¨çš„å·¥å…·,é€šè¿‡å…¨å±€ Git hook æ•è·æ‰€æœ‰æ“ä½œ,å¹¶æä¾› Web ç•Œé¢å±•ç¤ºç»Ÿè®¡æ•°æ®ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… **è‡ªåŠ¨æ‰«æ**: ä¸€é”®æ‰«æç³»ç»Ÿä¸­æ‰€æœ‰ Git ä»“åº“,è‡ªåŠ¨å®‰è£…ç›‘æ§ hook
- âœ… **ä»“åº“ç®¡ç†**: Web ç•Œé¢ç®¡ç†æ‰€æœ‰ç›‘æ§ä»“åº“,æ”¯æŒæ‰¹é‡æ“ä½œ
- âœ… **å…¨å±€ç›‘è§†**: é€šè¿‡ Git hook è‡ªåŠ¨æ•è·æ‰€æœ‰ä»“åº“çš„ commit å’Œ push æ“ä½œ
- âœ… **æ•°æ®å¯è§†åŒ–**: ä½¿ç”¨å›¾è¡¨å±•ç¤ºæäº¤è¶‹åŠ¿ã€ä»“åº“åˆ†å¸ƒã€åˆ†æ”¯æ´»è·ƒåº¦
- âœ… **è¯¦ç»†è®°å½•**: è®°å½•æ¯æ¬¡æ“ä½œçš„è¯¦ç»†ä¿¡æ¯(æ—¶é—´ã€ä»“åº“ã€åˆ†æ”¯ã€æ¶ˆæ¯ã€ä½œè€…ç­‰)
- âœ… **åŒå­˜å‚¨**: SQLite + JSON åŒæ¨¡å¼å­˜å‚¨,æ•°æ®æ›´å®‰å…¨
- âœ… **ç»Ÿè®¡åˆ†æ**: æä¾›å¤šç»´åº¦ç»Ÿè®¡æ•°æ®(æŒ‰æ—¥æœŸã€ä»“åº“ã€åˆ†æ”¯)
- âœ… **æ•°æ®å¯¼å‡º**: æ”¯æŒ CSV å’Œ JSON æ ¼å¼å¯¼å‡º
- âœ… **Web ç•Œé¢**: ç¾è§‚æ˜“ç”¨çš„ä»ªè¡¨ç›˜ç•Œé¢

## æŠ€æœ¯æ ˆ

- **åç«¯**: Python 3.7+ + Flask
- **å‰ç«¯**: HTML + CSS + JavaScript + Chart.js
- **æ•°æ®åº“**: SQLite
- **å­˜å‚¨**: JSON + SQLite åŒæ¨¡å¼

## ç³»ç»Ÿè¦æ±‚

- **Python**: 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬(æ¨è 3.8+)
- **Git**: ä»»æ„ç‰ˆæœ¬(ç”¨äº hook åŠŸèƒ½)
- **æ“ä½œç³»ç»Ÿ**: Windowsã€Linux æˆ– macOS

### æ£€æŸ¥ Python ç‰ˆæœ¬

åœ¨å®‰è£…å‰,è¯·ç¡®è®¤æ‚¨çš„ Python ç‰ˆæœ¬:

**Windows:**
```bash
python --version
```

**Linux/Mac:**
```bash
python3 --version
```

å¦‚æœç‰ˆæœ¬ä½äº 3.7,è¯·å…ˆå‡çº§ Python:
- **Windows**: è®¿é—® https://www.python.org/downloads/ ä¸‹è½½å®‰è£…
- **macOS**: ä½¿ç”¨ Homebrew: `brew install python3`
- **Linux**: ä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨æˆ– pyenv

## å®‰è£…æ­¥éª¤

### 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®

```bash
cd C:\Users\Liang\Desktop\Work\gitSee
```

### 2. è¿è¡Œå®‰è£…è„šæœ¬

**Windows:**
```bash
python setup.py
```

**Linux/Mac:**
```bash
python3 setup.py
```

å®‰è£…è„šæœ¬å°†è‡ªåŠ¨:
- âœ“ æ£€æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- âœ“ åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
- âœ“ åˆå§‹åŒ– SQLite æ•°æ®åº“
- âœ“ é…ç½® Git å…¨å±€æ¨¡æ¿ç›®å½•
- âœ“ å¤åˆ¶ hook è„šæœ¬
- âœ“ å®‰è£… Python ä¾èµ–

**æ³¨æ„**: å¦‚æœ Python ç‰ˆæœ¬ä¸ç¬¦åˆè¦æ±‚(ä½äº 3.7),å®‰è£…è„šæœ¬ä¼šæç¤ºæ‚¨å¹¶ä¸­æ­¢å®‰è£…ã€‚è¯·å…ˆå‡çº§ Python åå†è¿è¡Œå®‰è£…è„šæœ¬ã€‚

### 3. ä¸ºå·²æœ‰ä»“åº“å¯ç”¨ hook

```bash
cd your-existing-repo
git init  # é‡æ–°åˆå§‹åŒ–,åº”ç”¨å…¨å±€æ¨¡æ¿
```

## ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨ Web æœåŠ¡

**Windows:**
```bash
start_server.bat
```

**Linux/Mac:**
```bash
chmod +x start_server.sh
./start_server.sh
```

æˆ–æ‰‹åŠ¨å¯åŠ¨:
```bash
python backend/app.py
```

### è®¿é—® Web ç•Œé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®: `http://localhost:5000`

GitSee æä¾›ä¸‰ä¸ªä¸»è¦é¡µé¢:

1. **ä»ªè¡¨ç›˜** (`/`) - æŸ¥çœ‹æ•´ä½“ç»Ÿè®¡å’Œå›¾è¡¨
2. **è¯¦ç»†è®°å½•** (`/details`) - æŸ¥çœ‹æ‰€æœ‰ Git æ“ä½œè®°å½•
3. **ä»“åº“ç®¡ç†** (`/repositories`) - ç®¡ç†ç›‘æ§çš„ä»“åº“

## ä»“åº“ç®¡ç†

GitSee æä¾›äº†å¼ºå¤§çš„ä»“åº“ç®¡ç†åŠŸèƒ½,è®©æ‚¨å¯ä»¥è½»æ¾ç®¡ç†æ‰€æœ‰ Git ä»“åº“çš„ç›‘æ§ã€‚

### æ–¹å¼ä¸€:è‡ªåŠ¨æ‰«æ(æ¨è)

1. è®¿é—® `http://localhost:5000/repositories`
2. ç‚¹å‡» **"ğŸ” æ‰«æ Git ä»“åº“"** æŒ‰é’®
3. é€‰æ‹©æ‰«æé€‰é¡¹:
   - **æ‰«æç›®å½•**: ç•™ç©ºåˆ™æ‰«æå¸¸è§ç›®å½•(ç”¨æˆ·ä¸»ç›®å½•ã€æ¡Œé¢ã€æ–‡æ¡£ç­‰),æˆ–æ‰‹åŠ¨æŒ‡å®šç›®å½•(ç”¨åˆ†å·åˆ†éš”)
   - **æ‰«ææ·±åº¦**: æ§åˆ¶é€’å½’æ‰«æçš„æ·±åº¦(é»˜è®¤ 4 å±‚)
4. ç‚¹å‡» **"å¼€å§‹æ‰«æ"**
5. æ‰«æå®Œæˆå,é€‰æ‹©è¦æ·»åŠ çš„ä»“åº“

æ‰«æä¼šè‡ªåŠ¨å‘ç°:
- ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„æ‰€æœ‰ Git ä»“åº“
- æ¡Œé¢ã€æ–‡æ¡£ã€é¡¹ç›®ç›®å½•ä¸­çš„ä»“åº“
- è‡ªåŠ¨æ’é™¤ç³»ç»Ÿç›®å½•å’Œè™šæ‹Ÿç¯å¢ƒ

### æ–¹å¼äºŒ:æ‰‹åŠ¨æ·»åŠ 

1. åœ¨ä»“åº“ç®¡ç†é¡µé¢,æ‰¾åˆ° **"æ‰‹åŠ¨æ·»åŠ ä»“åº“"** è¡¨å•
2. è¾“å…¥ Git ä»“åº“çš„å®Œæ•´è·¯å¾„
3. ç‚¹å‡» **"æ·»åŠ "** æŒ‰é’®

ä¾‹å¦‚:
- Windows: `C:\Users\YourName\projects\my-repo`
- Linux/Mac: `/home/username/projects/my-repo`

### ç®¡ç†ç›‘æ§ä»“åº“

åœ¨ä»“åº“ç®¡ç†é¡µé¢,æ‚¨å¯ä»¥:

- **æŸ¥çœ‹ä»“åº“åˆ—è¡¨**: æ‰€æœ‰è¢«ç›‘æ§çš„ä»“åº“ä»¥å¡ç‰‡å½¢å¼å±•ç¤º
- **æŸ¥çœ‹ä»“åº“ä¿¡æ¯**:
  - ä»“åº“åç§°å’Œè·¯å¾„
  - ç›‘æ§çŠ¶æ€(å·²ç›‘æ§/æœªç›‘æ§)
  - æäº¤æ•°å’Œæ¨é€æ•°ç»Ÿè®¡
  - æœ€åæ´»åŠ¨æ—¶é—´
  - å½“å‰åˆ†æ”¯
  - è¿œç¨‹ä»“åº“ URL

- **å®‰è£…/å¸è½½ Hook**:
  - ç‚¹å‡» **"å®‰è£… Hook"** ä¸ºä»“åº“å¯ç”¨ç›‘æ§
  - ç‚¹å‡» **"å¸è½½ Hook"** åœæ­¢ç›‘æ§ä»“åº“

- **åˆ é™¤ä»“åº“**: ä»ç›‘æ§åˆ—è¡¨ä¸­ç§»é™¤ä»“åº“(ä¸ä¼šåˆ é™¤å®é™…æ–‡ä»¶)

### æ­£å¸¸ä½¿ç”¨

å®‰è£…å®Œæˆå,æ‰€æœ‰ Git æ“ä½œ(commit/push)å°†è‡ªåŠ¨è¢«æ•è·å¹¶è®°å½•,æ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚

åªéœ€æ­£å¸¸ä½¿ç”¨ Git:

```bash
git add .
git commit -m "your commit message"
git push
```

è¿™äº›æ“ä½œéƒ½ä¼šè¢«è‡ªåŠ¨è®°å½•åˆ° GitSee æ•°æ®åº“ä¸­ã€‚

## é¡¹ç›®ç»“æ„

```
gitSee/
â”œâ”€â”€ backend/                          # åç«¯æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ models/                       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ database.py              # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â””â”€â”€ storage_manager.py       # åŒå­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ routes/                      # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ api.py                   # ç»Ÿè®¡ API ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ repo_management.py      # ä»“åº“ç®¡ç† API
â”‚   â”‚   â””â”€â”€ web.py                   # Web é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ services/                    # æœåŠ¡
â”‚   â”‚   â””â”€â”€ statistics.py            # ç»Ÿè®¡æœåŠ¡
â”‚   â”œâ”€â”€ utils/                       # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ repo_scanner.py         # ä»“åº“æ‰«æå·¥å…·
â”‚   â”‚   â””â”€â”€ hook_installer.py       # Hook å®‰è£…å·¥å…·
â”‚   â””â”€â”€ app.py                       # Flask åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ frontend/                         # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/                     # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ js/                      # JavaScript æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ lib/                     # ç¬¬ä¸‰æ–¹åº“
â”‚   â””â”€â”€ templates/                   # HTML æ¨¡æ¿
â”‚       â”œâ”€â”€ base.html                # åŸºç¡€æ¨¡æ¿
â”‚       â”œâ”€â”€ dashboard.html           # ä»ªè¡¨ç›˜é¡µé¢
â”‚       â”œâ”€â”€ details.html             # è¯¦ç»†è®°å½•é¡µé¢
â”‚       â””â”€â”€ repositories.html        # ä»“åº“ç®¡ç†é¡µé¢
â”‚
â”œâ”€â”€ hooks_global/                     # å…¨å±€ hook è„šæœ¬
â”‚   â”œâ”€â”€ templates/hooks/             # Hook æ¨¡æ¿
â”‚   â””â”€â”€ scripts/                     # æ•è·è„šæœ¬
â”‚       â”œâ”€â”€ capture_commit.py        # æ•è· commit äº‹ä»¶
â”‚       â””â”€â”€ capture_push.py          # æ•è· push äº‹ä»¶
â”‚
â”œâ”€â”€ utils/                            # å·¥å…·è„šæœ¬
â”‚   â””â”€â”€ check_python.py              # Python ç¯å¢ƒæ£€æŸ¥
â”‚
â”œâ”€â”€ data/                            # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ gitsee.db                    # SQLite æ•°æ®åº“
â”‚   â””â”€â”€ records.json                 # JSON å¤‡ä»½
â”‚
â”œâ”€â”€ logs/                            # æ—¥å¿—ç›®å½•
â”‚   â””â”€â”€ app.log                      # åº”ç”¨æ—¥å¿—
â”‚
â”œâ”€â”€ setup.py                         # å®‰è£…è„šæœ¬
â”œâ”€â”€ config.json                      # é…ç½®æ–‡ä»¶
â”œâ”€â”€ start_server.bat                 # Windows å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start_server.sh                  # Linux/Mac å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt                 # Python ä¾èµ–
â””â”€â”€ README.md                        # é¡¹ç›®æ–‡æ¡£
```

## API æ–‡æ¡£

### ç»Ÿè®¡æ•°æ®

```
GET /api/v1/statistics
```

å‚æ•°:
- `start_date`: å¼€å§‹æ—¥æœŸ (YYYY-MM-DD)
- `end_date`: ç»“æŸæ—¥æœŸ (YYYY-MM-DD)
- `repo_path`: ä»“åº“è·¯å¾„ç­›é€‰

### æ´»åŠ¨åˆ—è¡¨

```
GET /api/v1/activities
```

å‚æ•°:
- `page`: é¡µç (ä» 1 å¼€å§‹)
- `page_size`: æ¯é¡µè®°å½•æ•°
- `activity_type`: æ´»åŠ¨ç±»å‹(commit/push)
- `repo_path`: ä»“åº“è·¯å¾„ç­›é€‰

### è¶‹åŠ¿æ•°æ®

```
GET /api/v1/trends
```

å‚æ•°:
- `period`: æ—¶é—´å‘¨æœŸ(day/week/month)
- `repo_path`: ä»“åº“è·¯å¾„ç­›é€‰
- `days`: è¿”å›æœ€è¿‘å‡ å¤©çš„æ•°æ®

### å¯¼å‡ºæ•°æ®

```
GET /api/v1/export
```

å‚æ•°:
- `format`: å¯¼å‡ºæ ¼å¼(json/csv)
- `start_date`: å¼€å§‹æ—¥æœŸ
- `end_date`: ç»“æŸæ—¥æœŸ

### æ‰‹åŠ¨åŒæ­¥

```
POST /api/v1/sync
```

è§¦å‘ SQLite å’Œ JSON æ•°æ®åŒæ­¥ã€‚

### ä»“åº“ç®¡ç† API

#### æ‰«æä»“åº“

```
POST /api/v1/repos/scan
```

è¯·æ±‚ä½“:
```json
{
  "directories": ["è·¯å¾„1", "è·¯å¾„2"],  // å¯é€‰
  "max_depth": 5  // å¯é€‰,é»˜è®¤ 4
}
```

#### æ·»åŠ ä»“åº“

```
POST /api/v1/repos/add
```

è¯·æ±‚ä½“:
```json
{
  "repo_path": "ä»“åº“è·¯å¾„",
  "install_hook": true  // æ˜¯å¦å®‰è£… hook
}
```

#### è·å–ä»“åº“åˆ—è¡¨

```
GET /api/v1/repos/list?monitored_only=false
```

#### å®‰è£… Hook

```
POST /api/v1/repos/<ä»“åº“è·¯å¾„>/install-hook
```

#### å¸è½½ Hook

```
POST /api/v1/repos/<ä»“åº“è·¯å¾„>/uninstall-hook
```

#### åˆ é™¤ä»“åº“

```
DELETE /api/v1/repos/<ä»“åº“è·¯å¾„>
```

#### æ‰¹é‡æ·»åŠ ä»“åº“

```
POST /api/v1/repos/batch-add
```

è¯·æ±‚ä½“:
```json
{
  "repo_paths": ["è·¯å¾„1", "è·¯å¾„2"],
  "install_hooks": true
}
```

## é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `config.json`:

```json
{
  "app": {
    "host": "0.0.0.0",
    "port": 5000,
    "debug": false
  },
  "database": {
    "path": "data/gitsee.db",
    "backup_enabled": true,
    "backup_interval": 86400
  },
  "features": {
    "auto_refresh": true,
    "refresh_interval": 30,
    "enable_trends": true,
    "enable_export": true
  }
}
```

## å¸¸è§é—®é¢˜

### 1. Git hook æ²¡æœ‰è§¦å‘?

- ç¡®è®¤å…¨å±€æ¨¡æ¿ç›®å½•å·²æ­£ç¡®é…ç½®:
  ```bash
  git config --global init.templatedir
  ```
- ä¸ºå·²æœ‰ä»“åº“é‡æ–°è¿è¡Œ `git init`

### 2. Web æœåŠ¡æ— æ³•å¯åŠ¨?

- æ£€æŸ¥ç«¯å£ 5000 æ˜¯å¦è¢«å ç”¨
- åœ¨ `config.json` ä¸­ä¿®æ”¹ç«¯å£é…ç½®
- ç¡®è®¤ Python ä¾èµ–å·²å®‰è£…

### 3. æ•°æ®æ²¡æœ‰æ˜¾ç¤º?

- ç¡®è®¤æ•°æ®åº“æ–‡ä»¶å­˜åœ¨: `data/gitsee.db`
- æ£€æŸ¥ Git hook è„šæœ¬æ˜¯å¦æœ‰æ‰§è¡Œæƒé™
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶: `logs/app.log`

## å¸è½½

### 1. å–æ¶ˆ Git å…¨å±€ hook

```bash
git config --global --unset init.templatedir
```

### 2. åˆ é™¤é¡¹ç›®æ–‡ä»¶

```bash
# åˆ é™¤é¡¹ç›®ç›®å½•
rm -rf gitSee
```

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request!

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜,è¯·æäº¤ Issueã€‚
